.\" Automatically generated by Pandoc 2.9.2.1
.\"
.TH "AFLOCK" "1" "2023" "Version 0.3.2" "chromflock documentation"
.hy
.PP
#NAME \f[B]aflock\f[R] \[em] the contact assigner in chromflock.
.SH SYNOPSIS
.PP
aflock [-A \[en]aFile fname] [-l \[en]low th] [-h \[en]high th] [-n
\[en]nStruct N] [-R \[en]radius R] [-Q \[en]vq q] [-m \[en]mArgs args]
[-I \[en]init] [-F \[en]final] [-U \[en]update] [-B \[en]blockupdate]
[-S \[en]score] [\[en]rpos fname] [\[en]prpos fname] [\[en]diploid]
.SH DESCRIPTION
.PP
\f[B]aflock\f[R] is to be used before, between and after mflock is used.
Typically in a script generated by chromflock.
aflock can be used to initialize N new struc\[hy] tures (or actually
their W matrices), it can also be used to update the W matrices by
moving contacts between them, or to add more contacts to them.
.PP
The contact probability matix, passed as the aFile is supposed to be a
\f[C][NxN]\f[R] symmetric matrix stored linearly and encoded as doubles.
Since the A matrix should be symmetric either row or column order will
work.
.PP
If the same radial preference is to be enforced for all structures, this
can be passed directly as an argument to mflock (use the -mArgs
argument).
To as\[hy] sign a radial preference with some probability to each
structure, use the \[en]rpos and \[en]prpos pair of arguments.
That will generate a separate file with radial constrains for each
structure which is updated in the same way as W by aflock.
.SS MODES
.PP
There are three modes,
.IP \[bu] 2
in initialization mode ( \[em]init ), the entries (m,n) where A_mn=1 are
assigned to all W matrices.
.IP \[bu] 2
In update mode, ( \[em]update ) the contact maps, W, are updated with
more contacts, or the contacts are re-distributed among them.
.IP \[bu] 2
The finalization mode ( \[em]final ) is used to creates some summary
statistics.
.SH OPTIONS
.TP
\f[B]--diploid\f[R]
Run in diploid mode.
This means that there will be two copies of each chromosome.
.TP
\f[B]-A file\f[R], \f[B]--aFile file\f[R]
Specifies a file that contains the contact probability matrix.
.TP
\f[B]-Q w\f[R], \f[B]--vq q\f[R]
Sets the volume quotient, q of the beads, i.e.\ how large the volume of
all beads should be in contrast to the volume of the nucleus.
By specifying a volume quotient, the bead radius will be set and hence
it is not possible to use -Q and -R simultaneously.
.TP
\f[B]-l th\f[R], \f[B]--low th\f[R]
Sets the lower threshold to use, i.e., the lowest values of A to use.
.TP
\f[B]-h th\f[R], \f[B]--high th\f[R]
Sets the lower threshold to use, i.e., the highest values of A to use.
.TP
\f[B]-R r0\f[R], \f[B]--radius r0\f[R]
Sets the radius of all beads to Ar r0 (they can\[cq]t be set
individually).
Probably you would like to use -Q instead.
.TP
\f[B]-m args\f[R], \f[B]--mArgs args\f[R]
Set the arguments to be used by mflock, these will be passed over to the
file named mflock_jobs that will be created.
.TP
\f[B]-I\f[R], \f[B]--init\f[R]
Set the mode to initialization.
.TP
\f[B]-U\f[R], \f[B]--update\f[R]
Set the mode to update.
.TP
\f[B]-B\f[R], \f[B]--blockupdate\f[R]
Set the mode to update, and blocks failed contacts be assigned again.
.TP
\f[B]-F\f[R], \f[B]--final\f[R]
Set the mode to finialization.
This does not update the structures or their contact indication
matrices.
This mode loops over all structures and sums up all contacts to
all_contacts.double.
It also creates a mean radial profile that is written to
radial_profile.csv.
.TP
\f[B]-h\f[R], \f[B]--help\f[R]
Show a brief help message.
.TP
\f[B]--rpos fname\f[R]
Specifies a file that contains the radial preferences for each bead.
The file should be encoded as double.
Only to be used together with \[en]prpos.
.TP
\f[B]--prpos fname\f[R]
Specifies a file that contains the probability or proportion of
structures that should have each radial constraint.
The file should be encoded as double.
Only to be used with \[en]rpos.
.SH EXAMPLES
.PP
See the script \f[C]/util/chromflock_gen\f[R].
.SS Basic usage:
.PP
Initialize 10,000 structures using the contact probability matrix in
A.double and give the beads a total volume that is 20% of the nuclei.
.IP
.nf
\f[C]
$ aflock --init --aFile A.double --nStruct 10000 --vq 0.02
\f[R]
.fi
.SH SEE ALSO
.PP
\f[B]chromflock\f[R], \f[B]mflock\f[R]
.SH WEB PAGE
.PP
<https://github.com/elgw/chromflock/>
.SH REPORTING BUGS
.PP
Please report bugs at <https://github.com/elgw/chromflock/issues/>
.SH COPYRIGHT
.PP
Copyright \[co] 2022 Erik Wernersson.
License GPLv3+: GNU GPL version 3 or later
<https://gnu.org/licenses/gpl.html>.
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.
.SH AUTHORS
Erik Wernersson.
